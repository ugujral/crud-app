<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Recipes Based of Your Groceries</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrapper">
    <h1>Groceries Tracker & Recipe Builder</h1>
    <p></p>
    <ul class="grocery">
      <li>Please Enter Your Groceries...</li>
    </ul>
    <form class="add-items">
      <input type="text" name="item" placeholder="Item Name" required>
      <input type="submit" value="+ Add Item">
    </form>
    <button class = "removeItems">Remove All Items</button>
    <button class = "recipe">Generate Recipes</button>
  </div>
<script>
  const addItems = document.querySelector('.add-items');
  const itemsList = document.querySelector('.grocery');
  const removeAllItems = document.querySelector('.removeItems');
  const recipeGenerator = document.querySelector('.recipe');
  let items = [];

  //Function that adds groceries to items array above
  function addItem(e) {
    e.preventDefault(); // VERY IMPORTANT otherwise page will keep refreshing 
    const text = (this.querySelector('[name=item]')).value; //Name of text box where user inputs items
    const item = {
      text,
      done: false // Sets all items by default to unchecked 
    };

    items.push(item);
    pushtoGroceryTag(items, itemsList); //Runs the function to take items and push them into items array
    localStorage.setItem('items', JSON.stringify(items)); //JSON.stringify to take the input object into a string since localStorage is a set of keys and values 
    this.reset(); //Empties input box so user can add new items
  };

  //Takes items passed and places into a html list 
  function pushtoGroceryTag(grocery = [], groceryList) { // Important to have empty array to loop over nothing if nothing is passed
    groceryList.innerHTML = grocery.map((grocery, i) => {
      return `
        <li>
          <input type="checkbox" data-index=${i} id="item${i}" ${grocery.done ? 'checked' : ''} />
          <label for="item${i}">${grocery.text}</label>
        </li>
      `;
    }).join('');
  };

  //Removes all items from list container
  function removeAll() {
    localStorage.clear();
    items = [];
    document.location.reload()
  };

  addItems.addEventListener('submit', addItem);
  removeAllItems.addEventListener('click', removeAll);

  pushtoGroceryTag(items, itemsList);
</script>
</body>
</html>